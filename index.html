<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
    />
    <link rel="apple-touch-icon" href="/pwa-192x192.png" />
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#f6d2d2" />
    <meta name="msapplication-TileColor" content="#f6d2d2" />

    <!-- 引入微应用sdk -->
    <script type="module">
      function loadSDK() {
        return new Promise((resolve, reject) => {
          if (import.meta.env.MODE === "iguowang") {
            const script = document.createElement("script");
            script.src = "../../sdk/boot.js";
            script.onload = resolve;
            script.onerror = reject;
            document.head.appendChild(script);
          } else {
            resolve();
          }
        });
      }

      loadSDK().catch((err) => {
        console.error("SDK 加载失败:", err);
      });
    </script>
    <script src="../../sdk/boot.js"></script>
    <script src="/webapp-MicroApplication.1.0.js"></script>

    <script>
      (function () {
        const prefersDark =
          window.matchMedia &&
          window.matchMedia("(prefers-color-scheme: dark)").matches;
        const setting = localStorage.getItem("vueuse-color-scheme") || "auto";
        if (setting === "dark" || (prefersDark && setting !== "light"))
          document.documentElement.classList.toggle("dark", true);
      })();
    </script>
  </head>
  <body>
    <div id="app"></div>
    <script type="module" src="/src/main.ts"></script>
    <noscript>
      This website requires JavaScript to function properly. Please enable
      JavaScript to continue.
    </noscript>
  </body>
</html>
