# Changelog

## [v1.0.14]

### Added

- 添加 ESLint 配置，使用 @antfu/eslint-config 作为基础配置。

### Todo

- [ ] 为 getCodeImg API 响应添加正确的类型定义
- [ ] 完善 API 响应的类型系统

### Added

- 🔒 集成 js-cookie 库增强用户认证功能

  - 添加 js-cookie 依赖到 package.json
  - 实现基于 cookie 的 token 管理机制
  - 新增验证码获取和验证功能
  - 优化登录流程，增加验证码校验步骤
- 🎨 用户界面优化

  - 登录页面新增验证码输入模块
  - 优化通道检测页面的交互体验
  - 改进用户信息展示方式
- 添加请求防重复提交功能，避免用户重复点击导致的多次提交

  - 在工单确认时增加防重复提交保护
  - 在告警配置保存时增加防重复提交保护
  - 在视频监控切换时增加防重复提交保护

### Changed

- 📦 依赖更新

  - 新增 js-cookie: ^x.x.x（具体版本号）
- 🔄 用户认证流程优化

  - 重构 token 管理逻辑，使用 js-cookie 统一管理
  - 完善用户信息状态管理
  - 增强登录安全性，添加验证码校验
- 优化 `EchartMap.vue` 组件的地图渲染逻辑，使用 `nextTick` 确保 DOM 更新后再初始化图表
- 改进地图数据加载机制，使用 `Promise.all` 并行加载数据，提升加载效率
- 完善错误处理机制，添加完整的错误捕获和提示

### Fixed

- 修复地图无法填满容器的问题，通过正确设置容器尺寸和使用 `nextTick` 解决
- 优化了地图组件的响应式布局表现
- 修复了可能导致重复提交的问题，增加了请求节流保护
- 修复登录页面的 TypeScript 类型检查警告
- 为 @ts-expect-error 添加必要的说明注释

### Security

- 🔐 增强用户认证安全性
  - 添加验证码机制防止暴力破解
  - 优化 token 存储方式，增加安全性
  - 完善
